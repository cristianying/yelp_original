{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cristianying/Desktop/programming/yelp original/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cristianying/Desktop/programming/yelp original/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useContext}from'react';import RestaurantFinder from\"../API/RestaurantFinder\";import{RestaurantsContext}from'../context/RestaurantsContext';import{useHistory}from'react-router-dom';import StarRating from'./StarRating';var RestaurantList=function RestaurantList(){//desctructuring from context \nvar _useContext=useContext(RestaurantsContext),restaurants=_useContext.restaurants,setRestaurants=_useContext.setRestaurants;var history=useHistory();useEffect(function(){//watch video at 3:32:00, which explains why it needs fetchData\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var responce;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return RestaurantFinder.get(\"/\");case 3:responce=_context.sent;setRestaurants(responce.data.data.restaurant);//console.log(restaurant);\n_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[setRestaurants]);var renderRating=function renderRating(restaurant){if(!restaurant.count){return/*#__PURE__*/React.createElement(\"span\",{className:\"text-warning\"},\"0 Reviews\");}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(StarRating,{rating:restaurant.id}),/*#__PURE__*/React.createElement(\"span\",{className:\"text-warning ml-1\"},\"(\",restaurant.count,\")\"));};var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.stopPropagation();_context2.prev=1;_context2.next=4;return RestaurantFinder.delete(\"/\".concat(id));case 4:setRestaurants(restaurants.filter(function(restaurant){return restaurant.id!==id;}));_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return function handleDelete(_x,_x2){return _ref2.apply(this,arguments);};}();var handleUpdate=function handleUpdate(e,id){e.stopPropagation();history.push(\"/restaurants/\".concat(id,\"/update\"));};var handleRestaurantSelect=function handleRestaurantSelect(id){history.push(\"/restaurants/\".concat(id));};return/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-hover table-dark\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"bg-primary\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Restaurant\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Location\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Price Range\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Ratings\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Edit\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Delete\"))),/*#__PURE__*/React.createElement(\"tbody\",null,restaurants&&//if restaurant has data run below code\nrestaurants.map(function(restaurant){return/*#__PURE__*/React.createElement(\"tr\",{onClick:function onClick(){return handleRestaurantSelect(restaurant.id);},key:restaurant.id},/*#__PURE__*/React.createElement(\"td\",null,restaurant.name),/*#__PURE__*/React.createElement(\"td\",null,restaurant.location),/*#__PURE__*/React.createElement(\"td\",null,\"$\".repeat(restaurant.price_range)),/*#__PURE__*/React.createElement(\"td\",null,renderRating(restaurant)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return handleUpdate(e,restaurant.id);},className:\"btn btn-warning\"},\"Update\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return handleDelete(e,restaurant.id);},className:\"btn btn-danger\"},\"Delete\")));}))));};export default RestaurantList;","map":{"version":3,"sources":["/Users/cristianying/Desktop/programming/yelp original/client/src/components/RestaurantList.jsx"],"names":["React","useEffect","useContext","RestaurantFinder","RestaurantsContext","useHistory","StarRating","RestaurantList","restaurants","setRestaurants","history","fetchData","get","responce","data","restaurant","renderRating","count","id","handleDelete","e","stopPropagation","delete","filter","console","log","handleUpdate","push","handleRestaurantSelect","map","name","location","repeat","price_range"],"mappings":"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","sourcesContent":["import React,{useEffect,useContext} from 'react'\nimport RestaurantFinder from \"../API/RestaurantFinder\"\nimport { RestaurantsContext } from '../context/RestaurantsContext'\nimport { useHistory } from 'react-router-dom'\nimport StarRating from './StarRating'\n\n\nconst RestaurantList = () => {\n    //desctructuring from context \n    const {restaurants,setRestaurants} = useContext(RestaurantsContext)\n\n    let history = useHistory();\n\nuseEffect( ()=> {\n    //watch video at 3:32:00, which explains why it needs fetchData\n    const fetchData = async ()=> {\n        try {\n            const responce = await RestaurantFinder.get(\"/\");\n            setRestaurants(responce.data.data.restaurant);\n            //console.log(restaurant);\n        } catch (error) {\n            \n        }\n    }\n    fetchData();\n},[setRestaurants]);\n\n\nconst renderRating = (restaurant) =>{\n    if(!restaurant.count){\n        return <span className=\"text-warning\">0 Reviews</span>\n    }\n    return(\n        <>\n            <StarRating rating = {restaurant.id}/>\n            <span className=\"text-warning ml-1\">({restaurant.count})</span>\n        </>\n\n    )\n    \n}\n\n\n\n\nconst handleDelete = async (e,id) =>{\n    e.stopPropagation();\n    try {\n        await RestaurantFinder.delete(`/${id}`);\n        setRestaurants(restaurants.filter(restaurant => {\n            return restaurant.id !== id\n        }))\n    } catch (error) {\n        console.log(error);\n        \n    }\n}\n\nconst handleUpdate = (e,id) => {\n    e.stopPropagation();\n    history.push(`/restaurants/${id}/update`)\n};\n\nconst handleRestaurantSelect = (id) =>{\n    history.push(`/restaurants/${id}`);\n}\n    return (\n        <div className=\"list-group\">\n            <table className=\"table table-hover table-dark\">\n               <thead>\n                   <tr className=\"bg-primary\">\n                        <th scope=\"col\">Restaurant</th>\n                        <th scope=\"col\">Location</th>\n                        <th scope=\"col\">Price Range</th>\n                        <th scope=\"col\">Ratings</th>\n                        <th scope=\"col\">Edit</th>   \n                        <th scope=\"col\">Delete</th>\n                   </tr>\n               </thead> \n            <tbody>\n                {restaurants && //if restaurant has data run below code\n                    restaurants.map(restaurant =>{\n                    return(\n                    <tr onClick={()=>handleRestaurantSelect(restaurant.id)} key={restaurant.id} >\n                        <td>{restaurant.name}</td>\n                        <td>{restaurant.location}</td>\n                        <td>{\"$\".repeat(restaurant.price_range)}</td>\n                        <td>{renderRating(restaurant)}</td>\n                        <td>\n                            <button onClick={ (e) => handleUpdate(e,restaurant.id)} className=\"btn btn-warning\">Update</button>\n                        </td>\n                        <td>\n                            <button onClick={ (e)=>handleDelete(e,restaurant.id)} className=\"btn btn-danger\">Delete</button>\n                        </td>\n\n                        \n                    </tr>\n                    )\n                })}\n                {/* <tr>\n                   <td>Mcdonalds</td>\n                   <td>NY</td> \n                   <td>$$</td> \n                   <td>Ratings</td>  \n                   <td><button className=\"btn btn-warning\">Updates</button></td> \n                   <td><button className=\"btn btn-danger\">Delete</button></td> \n                </tr> */}\n            </tbody>\n            </table>\n        </div>\n    )\n}\n\nexport default RestaurantList\n"]},"metadata":{},"sourceType":"module"}